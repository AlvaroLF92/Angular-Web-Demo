"use strict";(self.webpackChunkmi_aplicacion=self.webpackChunkmi_aplicacion||[]).push([[63],{8063:(G,p,l)=>{l.r(p),l.d(p,{CrudComponent:()=>N});var f=l(8745),m=l(177),a=l(9417),e=l(4020),c=l(7673),_=l(9437),g=l(5558),C=l(1626);let F=(()=>{class i{http;apiUrl="https://jsonplaceholder.typicode.com/users";users=[];constructor(t){this.http=t}getUsers(){return 0===this.users.length?this.http.get(this.apiUrl).pipe((0,_.W)(t=>(console.error("Error al obtener usuarios:",t),(0,c.of)([]))),(0,g.n)(t=>(this.users=t,(0,c.of)(this.users)))):(0,c.of)(this.users)}addUser(t){if(this.users.some(r=>r.email===t.email||r.phone===t.phone))return console.warn("Usuario duplicado. No se agregar\xe1."),(0,c.of)(t);const n=this.users.length>0?Math.max(...this.users.map(r=>r.id)):0;return t.id=n+1,this.users.push(t),(0,c.of)(t)}deleteUser(t){return this.users=this.users.filter(s=>s.id!==t),(0,c.of)(this.users)}updateUser(t){const s=this.users.findIndex(n=>n.id===t.id);return-1!==s&&(this.users[s]=t),(0,c.of)(this.users)}static \u0275fac=function(s){return new(s||i)(e.KVO(C.Qq))};static \u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var j=l(8834),h=l(6833),k=l(9631);const U=["userForm"],E=["formContainer"];function v(i,u){if(1&i){const t=e.RV6();e.j41(0,"tr",16),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.selectUser(n))}),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"button",17),e.bIt("click",function(n){const r=e.eBV(t).$implicit,d=e.XpG(2);return e.Njj(d.deleteUser(r.id,n))}),e.j41(11,"span",18),e.EFF(12,"close"),e.k0s()()()()}if(2&i){const t=u.$implicit;e.R7$(2),e.JRh(t.id),e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(t.email||"N/A"),e.R7$(2),e.JRh(t.phone||"N/A")}}function b(i,u){if(1&i&&(e.j41(0,"div")(1,"table",14)(2,"thead")(3,"tr")(4,"th"),e.EFF(5,"ID"),e.k0s(),e.j41(6,"th"),e.EFF(7,"Nombre"),e.k0s(),e.j41(8,"th"),e.EFF(9,"Email"),e.k0s(),e.j41(10,"th"),e.EFF(11,"Phone"),e.k0s()()(),e.j41(12,"tbody"),e.DNE(13,v,13,4,"tr",15),e.k0s()()()),2&i){const t=e.XpG();e.R7$(13),e.Y8G("ngForOf",t.users)}}function M(i,u){1&i&&(e.j41(0,"p"),e.EFF(1,"No hay usuarios para mostrar."),e.k0s())}function I(i,u){if(1&i){const t=e.RV6();e.j41(0,"div",22)(1,"h3"),e.EFF(2,"Detalles del Usuario"),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"ID:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Nombre:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"p")(12,"strong"),e.EFF(13,"Email:"),e.k0s(),e.EFF(14),e.k0s(),e.j41(15,"p")(16,"strong"),e.EFF(17,"Phone:"),e.k0s(),e.EFF(18),e.k0s(),e.j41(19,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.editUser())}),e.EFF(20," Editar "),e.k0s(),e.j41(21,"button",24),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.cancelDetail())}),e.EFF(22," Cancelar "),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(6),e.SpI(" ",t.selectedUser.id,""),e.R7$(4),e.SpI(" ",t.selectedUser.name,""),e.R7$(4),e.SpI(" ",t.selectedUser.email,""),e.R7$(4),e.SpI(" ",t.selectedUser.phone,"")}}function R(i,u){if(1&i){const t=e.RV6();e.j41(0,"div",25)(1,"h3"),e.EFF(2,"Editar Usuario"),e.k0s(),e.j41(3,"mat-form-field")(4,"mat-label"),e.EFF(5,"Nombre"),e.k0s(),e.j41(6,"input",26),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.selectedUser.name,n)||(r.selectedUser.name=n),e.Njj(n)}),e.k0s()(),e.j41(7,"mat-form-field")(8,"mat-label"),e.EFF(9,"Email"),e.k0s(),e.j41(10,"input",26),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.selectedUser.email,n)||(r.selectedUser.email=n),e.Njj(n)}),e.k0s()(),e.j41(11,"mat-form-field")(12,"mat-label"),e.EFF(13,"Phone"),e.k0s(),e.j41(14,"input",26),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG(2);return e.DH7(r.selectedUser.phone,n)||(r.selectedUser.phone=n),e.Njj(n)}),e.k0s()(),e.j41(15,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.saveUser())}),e.EFF(16," Guardar "),e.k0s(),e.j41(17,"button",24),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.cancelEdit())}),e.EFF(18," Cancelar "),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(6),e.R50("ngModel",t.selectedUser.name),e.R7$(4),e.R50("ngModel",t.selectedUser.email),e.R7$(4),e.R50("ngModel",t.selectedUser.phone)}}function T(i,u){if(1&i&&(e.j41(0,"div",19),e.DNE(1,I,23,4,"div",20)(2,R,19,3,"div",21),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngIf",!t.editMode),e.R7$(),e.Y8G("ngIf",t.editMode)}}let N=(()=>{class i{userService;eRef;userForm;formContainer;users=[];selectedUser=null;editMode=!1;showDetail=!1;newUser={id:0,name:"",email:"",phone:""};errorMessage="";constructor(t,s){this.userService=t,this.eRef=s}ngOnInit(){this.getUsers()}getUsers(){this.userService.getUsers().subscribe(t=>{this.users=t})}addUser(t){this.newUser.name&&this.newUser.email&&this.newUser.phone?this.userService.addUser(this.newUser).subscribe(s=>{this.users.find(n=>n.email===s.email&&n.phone===s.phone)||this.users.push(s),this.newUser={id:0,name:"",email:"",phone:""},this.errorMessage="",setTimeout(()=>{t.resetForm()},0)}):this.errorMessage="Todos los campos son obligatorios."}deleteUser(t,s){s.stopPropagation(),this.userService.deleteUser(t).subscribe(n=>{this.users=n,this.selectedUser?.id===t&&this.cancelDetail()})}selectUser(t){this.selectedUser?.id!==t.id&&(this.selectedUser=t,this.showDetail=!0,this.editMode=!1)}editUser(){this.editMode=!0}saveUser(){this.selectedUser&&this.userService.updateUser(this.selectedUser).subscribe(t=>{this.users=t,this.editMode=!1})}cancelEdit(){this.editMode=!1}cancelDetail(){this.showDetail=!1,this.selectedUser=null}onClickOutside(t){this.formContainer&&(this.formContainer.nativeElement.contains(t.target)||this.resetTouchedFields())}resetTouchedFields(){this.userForm&&Object.keys(this.userForm.controls).forEach(t=>{const s=this.userForm.controls[t];s.touched&&s.markAsUntouched()})}static \u0275fac=function(s){return new(s||i)(e.rXU(F),e.rXU(e.aKT))};static \u0275cmp=e.VBU({type:i,selectors:[["app-crud"]],viewQuery:function(s,n){if(1&s&&(e.GBs(U,5),e.GBs(E,5)),2&s){let r;e.mGM(r=e.lsd())&&(n.userForm=r.first),e.mGM(r=e.lsd())&&(n.formContainer=r.first)}},hostBindings:function(s,n){1&s&&e.bIt("click",function(d){return n.onClickOutside(d)},!1,e.EBC)},decls:29,vars:6,consts:[["formContainer",""],["userForm","ngForm"],["noUsers",""],[1,"add-user-container"],[1,"form-container",3,"click"],[3,"ngSubmit"],["matInput","","name","name","required","",3,"ngModelChange","ngModel"],["matInput","","name","email","required","",3,"ngModelChange","ngModel"],["matInput","","name","phone","required","",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit"],[1,"list-title"],[1,"container"],[4,"ngIf","ngIfElse"],["class","details-container",4,"ngIf"],[1,"users-table"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"delete-btn",3,"click"],[1,"material-icons"],[1,"details-container"],["class","details-view",4,"ngIf"],["class","edit-view",4,"ngIf"],[1,"details-view"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"edit-view"],["matInput","",3,"ngModelChange","ngModel"]],template:function(s,n){if(1&s){const r=e.RV6();e.j41(0,"div",3)(1,"h3"),e.EFF(2,"A\xf1adir Usuario"),e.k0s(),e.j41(3,"div",4),e.bIt("click",function(o){return e.eBV(r),e.Njj(n.onClickOutside(o))}),e.j41(4,"div",null,0)(6,"form",5,1),e.bIt("ngSubmit",function(){e.eBV(r);const o=e.sdS(7);return e.Njj(n.addUser(o))}),e.j41(8,"mat-form-field")(9,"mat-label"),e.EFF(10,"Nombre"),e.k0s(),e.j41(11,"input",6),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.newUser.name,o)||(n.newUser.name=o),e.Njj(o)}),e.k0s()(),e.j41(12,"mat-form-field")(13,"mat-label"),e.EFF(14,"Email"),e.k0s(),e.j41(15,"input",7),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.newUser.email,o)||(n.newUser.email=o),e.Njj(o)}),e.k0s()(),e.j41(16,"mat-form-field")(17,"mat-label"),e.EFF(18,"Tel\xe9fono"),e.k0s(),e.j41(19,"input",8),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.newUser.phone,o)||(n.newUser.phone=o),e.Njj(o)}),e.k0s()(),e.j41(20,"button",9),e.EFF(21,"Agregar"),e.k0s()()()()(),e.j41(22,"h3",10),e.EFF(23,"Lista de Usuarios:"),e.k0s(),e.j41(24,"div",11),e.DNE(25,b,14,1,"div",12)(26,M,2,0,"ng-template",null,2,e.C5r)(28,T,3,2,"div",13),e.k0s()}if(2&s){const r=e.sdS(27);e.R7$(11),e.R50("ngModel",n.newUser.name),e.R7$(4),e.R50("ngModel",n.newUser.email),e.R7$(4),e.R50("ngModel",n.newUser.phone),e.R7$(6),e.Y8G("ngIf",n.users.length>0)("ngIfElse",r),e.R7$(3),e.Y8G("ngIf",n.selectedUser)}},dependencies:[f.G,m.Sq,m.bT,a.qT,a.me,a.BC,a.cb,a.YS,j.$z,h.rl,h.nJ,k.fg,m.MD,a.YN,a.vS,a.cV],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:4rem;gap:2rem}.table-container[_ngcontent-%COMP%]{width:50%;border-right:1px solid #ddd;padding-right:1rem}.list-title[_ngcontent-%COMP%]{text-align:center}.details-container[_ngcontent-%COMP%]{width:50%;padding-left:1rem}.delete-btn[_ngcontent-%COMP%]{color:red;background:none;border:none;cursor:pointer}.delete-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.add-user-container[_ngcontent-%COMP%]{margin:2rem;display:flex;justify-content:center;align-items:center}"]})}return i})()}}]);